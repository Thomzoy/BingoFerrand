{"ast":null,"code":"\"use strict\";\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.function.name.js\");\n\nrequire(\"core-js/modules/es.array.is-array.js\");\n\nrequire(\"core-js/modules/es.array.some.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.array.every.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.array.for-each.js\");\n\nrequire(\"core-js/modules/web.dom-collections.for-each.js\");\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.compileToken = exports.compileUnsafe = exports.compile = void 0;\n\nvar css_what_1 = require(\"css-what\");\n\nvar boolbase_1 = require(\"boolbase\");\n\nvar sort_1 = __importDefault(require(\"./sort\"));\n\nvar procedure_1 = require(\"./procedure\");\n\nvar general_1 = require(\"./general\");\n\nvar subselects_1 = require(\"./pseudo-selectors/subselects\");\n/**\n * Compiles a selector to an executable function.\n *\n * @param selector Selector to compile.\n * @param options Compilation options.\n * @param context Optional context for the selector.\n */\n\n\nfunction compile(selector, options, context) {\n  var next = compileUnsafe(selector, options, context);\n  return (0, subselects_1.ensureIsTag)(next, options.adapter);\n}\n\nexports.compile = compile;\n\nfunction compileUnsafe(selector, options, context) {\n  var token = typeof selector === \"string\" ? (0, css_what_1.parse)(selector) : selector;\n  return compileToken(token, options, context);\n}\n\nexports.compileUnsafe = compileUnsafe;\n\nfunction includesScopePseudo(t) {\n  return t.type === \"pseudo\" && (t.name === \"scope\" || Array.isArray(t.data) && t.data.some(function (data) {\n    return data.some(includesScopePseudo);\n  }));\n}\n\nvar DESCENDANT_TOKEN = {\n  type: css_what_1.SelectorType.Descendant\n};\nvar FLEXIBLE_DESCENDANT_TOKEN = {\n  type: \"_flexibleDescendant\"\n};\nvar SCOPE_TOKEN = {\n  type: css_what_1.SelectorType.Pseudo,\n  name: \"scope\",\n  data: null\n};\n/*\n * CSS 4 Spec (Draft): 3.3.1. Absolutizing a Scope-relative Selector\n * http://www.w3.org/TR/selectors4/#absolutizing\n */\n\nfunction absolutize(token, _a, context) {\n  var adapter = _a.adapter; // TODO Use better check if the context is a document\n\n  var hasContext = !!(context === null || context === void 0 ? void 0 : context.every(function (e) {\n    var parent = adapter.isTag(e) && adapter.getParent(e);\n    return e === subselects_1.PLACEHOLDER_ELEMENT || parent && adapter.isTag(parent);\n  }));\n\n  for (var _i = 0, token_1 = token; _i < token_1.length; _i++) {\n    var t = token_1[_i];\n\n    if (t.length > 0 && (0, procedure_1.isTraversal)(t[0]) && t[0].type !== \"descendant\") {// Don't continue in else branch\n    } else if (hasContext && !t.some(includesScopePseudo)) {\n      t.unshift(DESCENDANT_TOKEN);\n    } else {\n      continue;\n    }\n\n    t.unshift(SCOPE_TOKEN);\n  }\n}\n\nfunction compileToken(token, options, context) {\n  var _a;\n\n  token = token.filter(function (t) {\n    return t.length > 0;\n  });\n  token.forEach(sort_1[\"default\"]);\n  context = (_a = options.context) !== null && _a !== void 0 ? _a : context;\n  var isArrayContext = Array.isArray(context);\n  var finalContext = context && (Array.isArray(context) ? context : [context]);\n  absolutize(token, options, finalContext);\n  var shouldTestNextSiblings = false;\n  var query = token.map(function (rules) {\n    if (rules.length >= 2) {\n      var first = rules[0],\n          second = rules[1];\n\n      if (first.type !== \"pseudo\" || first.name !== \"scope\") {// Ignore\n      } else if (isArrayContext && second.type === \"descendant\") {\n        rules[1] = FLEXIBLE_DESCENDANT_TOKEN;\n      } else if (second.type === \"adjacent\" || second.type === \"sibling\") {\n        shouldTestNextSiblings = true;\n      }\n    }\n\n    return compileRules(rules, options, finalContext);\n  }).reduce(reduceRules, boolbase_1.falseFunc);\n  query.shouldTestNextSiblings = shouldTestNextSiblings;\n  return query;\n}\n\nexports.compileToken = compileToken;\n\nfunction compileRules(rules, options, context) {\n  var _a;\n\n  return rules.reduce(function (previous, rule) {\n    return previous === boolbase_1.falseFunc ? boolbase_1.falseFunc : (0, general_1.compileGeneralSelector)(previous, rule, options, context, compileToken);\n  }, (_a = options.rootFunc) !== null && _a !== void 0 ? _a : boolbase_1.trueFunc);\n}\n\nfunction reduceRules(a, b) {\n  if (b === boolbase_1.falseFunc || a === boolbase_1.trueFunc) {\n    return a;\n  }\n\n  if (a === boolbase_1.falseFunc || b === boolbase_1.trueFunc) {\n    return b;\n  }\n\n  return function combine(elem) {\n    return a(elem) || b(elem);\n  };\n}","map":{"version":3,"sources":["/home/thomas/Code/BingoFerrand/node_modules/css-select/lib/compile.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","compileToken","compileUnsafe","compile","css_what_1","require","boolbase_1","sort_1","procedure_1","general_1","subselects_1","selector","options","context","next","ensureIsTag","adapter","token","parse","includesScopePseudo","t","type","name","Array","isArray","data","some","DESCENDANT_TOKEN","SelectorType","Descendant","FLEXIBLE_DESCENDANT_TOKEN","SCOPE_TOKEN","Pseudo","absolutize","_a","hasContext","every","e","parent","isTag","getParent","PLACEHOLDER_ELEMENT","_i","token_1","length","isTraversal","unshift","filter","forEach","isArrayContext","finalContext","shouldTestNextSiblings","query","map","rules","first","second","compileRules","reduce","reduceRules","falseFunc","previous","rule","compileGeneralSelector","rootFunc","trueFunc","a","b","combine","elem"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.compileToken = exports.compileUnsafe = exports.compile = void 0;\nvar css_what_1 = require(\"css-what\");\nvar boolbase_1 = require(\"boolbase\");\nvar sort_1 = __importDefault(require(\"./sort\"));\nvar procedure_1 = require(\"./procedure\");\nvar general_1 = require(\"./general\");\nvar subselects_1 = require(\"./pseudo-selectors/subselects\");\n/**\n * Compiles a selector to an executable function.\n *\n * @param selector Selector to compile.\n * @param options Compilation options.\n * @param context Optional context for the selector.\n */\nfunction compile(selector, options, context) {\n    var next = compileUnsafe(selector, options, context);\n    return (0, subselects_1.ensureIsTag)(next, options.adapter);\n}\nexports.compile = compile;\nfunction compileUnsafe(selector, options, context) {\n    var token = typeof selector === \"string\" ? (0, css_what_1.parse)(selector) : selector;\n    return compileToken(token, options, context);\n}\nexports.compileUnsafe = compileUnsafe;\nfunction includesScopePseudo(t) {\n    return (t.type === \"pseudo\" &&\n        (t.name === \"scope\" ||\n            (Array.isArray(t.data) &&\n                t.data.some(function (data) { return data.some(includesScopePseudo); }))));\n}\nvar DESCENDANT_TOKEN = { type: css_what_1.SelectorType.Descendant };\nvar FLEXIBLE_DESCENDANT_TOKEN = {\n    type: \"_flexibleDescendant\",\n};\nvar SCOPE_TOKEN = {\n    type: css_what_1.SelectorType.Pseudo,\n    name: \"scope\",\n    data: null,\n};\n/*\n * CSS 4 Spec (Draft): 3.3.1. Absolutizing a Scope-relative Selector\n * http://www.w3.org/TR/selectors4/#absolutizing\n */\nfunction absolutize(token, _a, context) {\n    var adapter = _a.adapter;\n    // TODO Use better check if the context is a document\n    var hasContext = !!(context === null || context === void 0 ? void 0 : context.every(function (e) {\n        var parent = adapter.isTag(e) && adapter.getParent(e);\n        return e === subselects_1.PLACEHOLDER_ELEMENT || (parent && adapter.isTag(parent));\n    }));\n    for (var _i = 0, token_1 = token; _i < token_1.length; _i++) {\n        var t = token_1[_i];\n        if (t.length > 0 && (0, procedure_1.isTraversal)(t[0]) && t[0].type !== \"descendant\") {\n            // Don't continue in else branch\n        }\n        else if (hasContext && !t.some(includesScopePseudo)) {\n            t.unshift(DESCENDANT_TOKEN);\n        }\n        else {\n            continue;\n        }\n        t.unshift(SCOPE_TOKEN);\n    }\n}\nfunction compileToken(token, options, context) {\n    var _a;\n    token = token.filter(function (t) { return t.length > 0; });\n    token.forEach(sort_1.default);\n    context = (_a = options.context) !== null && _a !== void 0 ? _a : context;\n    var isArrayContext = Array.isArray(context);\n    var finalContext = context && (Array.isArray(context) ? context : [context]);\n    absolutize(token, options, finalContext);\n    var shouldTestNextSiblings = false;\n    var query = token\n        .map(function (rules) {\n        if (rules.length >= 2) {\n            var first = rules[0], second = rules[1];\n            if (first.type !== \"pseudo\" || first.name !== \"scope\") {\n                // Ignore\n            }\n            else if (isArrayContext && second.type === \"descendant\") {\n                rules[1] = FLEXIBLE_DESCENDANT_TOKEN;\n            }\n            else if (second.type === \"adjacent\" ||\n                second.type === \"sibling\") {\n                shouldTestNextSiblings = true;\n            }\n        }\n        return compileRules(rules, options, finalContext);\n    })\n        .reduce(reduceRules, boolbase_1.falseFunc);\n    query.shouldTestNextSiblings = shouldTestNextSiblings;\n    return query;\n}\nexports.compileToken = compileToken;\nfunction compileRules(rules, options, context) {\n    var _a;\n    return rules.reduce(function (previous, rule) {\n        return previous === boolbase_1.falseFunc\n            ? boolbase_1.falseFunc\n            : (0, general_1.compileGeneralSelector)(previous, rule, options, context, compileToken);\n    }, (_a = options.rootFunc) !== null && _a !== void 0 ? _a : boolbase_1.trueFunc);\n}\nfunction reduceRules(a, b) {\n    if (b === boolbase_1.falseFunc || a === boolbase_1.trueFunc) {\n        return a;\n    }\n    if (a === boolbase_1.falseFunc || b === boolbase_1.trueFunc) {\n        return b;\n    }\n    return function combine(elem) {\n        return a(elem) || b(elem);\n    };\n}\n"]},"metadata":{},"sourceType":"script"}
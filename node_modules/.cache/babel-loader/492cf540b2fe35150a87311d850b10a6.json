{"ast":null,"code":"\"use strict\";\n/**\n * Methods for traversing the DOM structure.\n *\n * @module cheerio/traversing\n */\n\nrequire(\"core-js/modules/es.object.define-property.js\");\n\nrequire(\"core-js/modules/es.array.slice.js\");\n\nrequire(\"core-js/modules/es.object.to-string.js\");\n\nrequire(\"core-js/modules/es.array.filter.js\");\n\nrequire(\"core-js/modules/es.array.map.js\");\n\nrequire(\"core-js/modules/es.array.find.js\");\n\nrequire(\"core-js/modules/es.array.some.js\");\n\nrequire(\"core-js/modules/es.regexp.exec.js\");\n\nrequire(\"core-js/modules/es.regexp.test.js\");\n\nrequire(\"core-js/modules/es.array.reduce.js\");\n\nrequire(\"core-js/modules/es.array.concat.js\");\n\nrequire(\"core-js/modules/es.array.from.js\");\n\nrequire(\"core-js/modules/es.string.iterator.js\");\n\nrequire(\"core-js/modules/es.set.js\");\n\nrequire(\"core-js/modules/web.dom-collections.iterator.js\");\n\nrequire(\"core-js/modules/es.array.reverse.js\");\n\nrequire(\"core-js/modules/es.array.includes.js\");\n\nrequire(\"core-js/modules/es.array.index-of.js\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.addBack = exports.add = exports.end = exports.slice = exports.index = exports.toArray = exports.get = exports.eq = exports.last = exports.first = exports.has = exports.not = exports.is = exports.filterArray = exports.filter = exports.map = exports.each = exports.contents = exports.children = exports.siblings = exports.prevUntil = exports.prevAll = exports.prev = exports.nextUntil = exports.nextAll = exports.next = exports.closest = exports.parentsUntil = exports.parents = exports.parent = exports.find = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar domhandler_1 = require(\"domhandler\");\n\nvar select = tslib_1.__importStar(require(\"cheerio-select\"));\n\nvar utils_1 = require(\"../utils\");\n\nvar static_1 = require(\"../static\");\n\nvar htmlparser2_1 = require(\"htmlparser2\");\n\nvar uniqueSort = htmlparser2_1.DomUtils.uniqueSort;\nvar reSiblingSelector = /^\\s*[~+]/;\n/**\n * Get the descendants of each element in the current set of matched elements,\n * filtered by a selector, jQuery object, or element.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('#fruits').find('li').length;\n * //=> 3\n * $('#fruits').find($('.apple')).length;\n * //=> 1\n * ```\n *\n * @param selectorOrHaystack - Element to look for.\n * @returns The found elements.\n * @see {@link https://api.jquery.com/find/}\n */\n\nfunction find(selectorOrHaystack) {\n  var _a;\n\n  if (!selectorOrHaystack) {\n    return this._make([]);\n  }\n\n  var context = this.toArray();\n\n  if (typeof selectorOrHaystack !== 'string') {\n    var haystack = utils_1.isCheerio(selectorOrHaystack) ? selectorOrHaystack.toArray() : [selectorOrHaystack];\n    return this._make(haystack.filter(function (elem) {\n      return context.some(function (node) {\n        return static_1.contains(node, elem);\n      });\n    }));\n  }\n\n  var elems = reSiblingSelector.test(selectorOrHaystack) ? context : this.children().toArray();\n  var options = {\n    context: context,\n    root: (_a = this._root) === null || _a === void 0 ? void 0 : _a[0],\n    xmlMode: this.options.xmlMode\n  };\n  return this._make(select.select(selectorOrHaystack, elems, options));\n}\n\nexports.find = find;\n/**\n * Creates a matcher, using a particular mapping function. Matchers provide a\n * function that finds elements using a generating function, supporting filtering.\n *\n * @private\n * @param matchMap - Mapping function.\n * @returns - Function for wrapping generating functions.\n */\n\nfunction _getMatcher(matchMap) {\n  return function (fn) {\n    var postFns = [];\n\n    for (var _i = 1; _i < arguments.length; _i++) {\n      postFns[_i - 1] = arguments[_i];\n    }\n\n    return function (selector) {\n      var _a;\n\n      var matched = matchMap(fn, this);\n\n      if (selector) {\n        matched = filterArray(matched, selector, this.options.xmlMode, (_a = this._root) === null || _a === void 0 ? void 0 : _a[0]);\n      }\n\n      return this._make( // Post processing is only necessary if there is more than one element.\n      this.length > 1 && matched.length > 1 ? postFns.reduce(function (elems, fn) {\n        return fn(elems);\n      }, matched) : matched);\n    };\n  };\n}\n/** Matcher that adds multiple elements for each entry in the input. */\n\n\nvar _matcher = _getMatcher(function (fn, elems) {\n  var _a;\n\n  var ret = [];\n\n  for (var i = 0; i < elems.length; i++) {\n    var value = fn(elems[i]);\n    ret.push(value);\n  }\n\n  return (_a = new Array()).concat.apply(_a, ret);\n});\n/** Matcher that adds at most one element for each entry in the input. */\n\n\nvar _singleMatcher = _getMatcher(function (fn, elems) {\n  var ret = [];\n\n  for (var i = 0; i < elems.length; i++) {\n    var value = fn(elems[i]);\n\n    if (value !== null) {\n      ret.push(value);\n    }\n  }\n\n  return ret;\n});\n/**\n * Matcher that supports traversing until a condition is met.\n *\n * @returns A function usable for `*Until` methods.\n */\n\n\nfunction _matchUntil(nextElem) {\n  var postFns = [];\n\n  for (var _i = 1; _i < arguments.length; _i++) {\n    postFns[_i - 1] = arguments[_i];\n  } // We use a variable here that is used from within the matcher.\n\n\n  var matches = null;\n\n  var innerMatcher = _getMatcher(function (nextElem, elems) {\n    var matched = [];\n    utils_1.domEach(elems, function (elem) {\n      for (var next_1; next_1 = nextElem(elem); elem = next_1) {\n        // FIXME: `matched` might contain duplicates here and the index is too large.\n        if (matches === null || matches === void 0 ? void 0 : matches(next_1, matched.length)) break;\n        matched.push(next_1);\n      }\n    });\n    return matched;\n  }).apply(void 0, tslib_1.__spreadArray([nextElem], postFns));\n\n  return function (selector, filterSelector) {\n    var _this = this; // Override `matches` variable with the new target.\n\n\n    matches = typeof selector === 'string' ? function (elem) {\n      return select.is(elem, selector, _this.options);\n    } : selector ? getFilterFn(selector) : null;\n    var ret = innerMatcher.call(this, filterSelector); // Set `matches` to `null`, so we don't waste memory.\n\n    matches = null;\n    return ret;\n  };\n}\n\nfunction _removeDuplicates(elems) {\n  return Array.from(new Set(elems));\n}\n/**\n * Get the parent of each element in the current set of matched elements,\n * optionally filtered by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.pear').parent().attr('id');\n * //=> fruits\n * ```\n *\n * @param selector - If specified filter for parent.\n * @returns The parents.\n * @see {@link https://api.jquery.com/parent/}\n */\n\n\nexports.parent = _singleMatcher(function (_a) {\n  var parent = _a.parent;\n  return parent && !domhandler_1.isDocument(parent) ? parent : null;\n}, _removeDuplicates);\n/**\n * Get a set of parents filtered by `selector` of each element in the current\n * set of match elements.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.orange').parents().length;\n * //=> 2\n * $('.orange').parents('#fruits').length;\n * //=> 1\n * ```\n *\n * @param selector - If specified filter for parents.\n * @returns The parents.\n * @see {@link https://api.jquery.com/parents/}\n */\n\nexports.parents = _matcher(function (elem) {\n  var matched = [];\n\n  while (elem.parent && !domhandler_1.isDocument(elem.parent)) {\n    matched.push(elem.parent);\n    elem = elem.parent;\n  }\n\n  return matched;\n}, uniqueSort, function (elems) {\n  return elems.reverse();\n});\n/**\n * Get the ancestors of each element in the current set of matched elements, up\n * to but not including the element matched by the selector, DOM node, or cheerio object.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.orange').parentsUntil('#food').length;\n * //=> 1\n * ```\n *\n * @param selector - Selector for element to stop at.\n * @param filterSelector - Optional filter for parents.\n * @returns The parents.\n * @see {@link https://api.jquery.com/parentsUntil/}\n */\n\nexports.parentsUntil = _matchUntil(function (_a) {\n  var parent = _a.parent;\n  return parent && !domhandler_1.isDocument(parent) ? parent : null;\n}, uniqueSort, function (elems) {\n  return elems.reverse();\n});\n/**\n * For each element in the set, get the first element that matches the selector\n * by testing the element itself and traversing up through its ancestors in the DOM tree.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.orange').closest();\n * //=> []\n *\n * $('.orange').closest('.apple');\n * // => []\n *\n * $('.orange').closest('li');\n * //=> [<li class=\"orange\">Orange</li>]\n *\n * $('.orange').closest('#fruits');\n * //=> [<ul id=\"fruits\"> ... </ul>]\n * ```\n *\n * @param selector - Selector for the element to find.\n * @returns The closest nodes.\n * @see {@link https://api.jquery.com/closest/}\n */\n\nfunction closest(selector) {\n  var _this = this;\n\n  var set = [];\n\n  if (!selector) {\n    return this._make(set);\n  }\n\n  utils_1.domEach(this, function (elem) {\n    var _a;\n\n    while (elem && elem.type !== 'root') {\n      if (!selector || filterArray([elem], selector, _this.options.xmlMode, (_a = _this._root) === null || _a === void 0 ? void 0 : _a[0]).length) {\n        // Do not add duplicate elements to the set\n        if (elem && !set.includes(elem)) {\n          set.push(elem);\n        }\n\n        break;\n      }\n\n      elem = elem.parent;\n    }\n  });\n  return this._make(set);\n}\n\nexports.closest = closest;\n/**\n * Gets the next sibling of the first selected element, optionally filtered by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.apple').next().hasClass('orange');\n * //=> true\n * ```\n *\n * @param selector - If specified filter for sibling.\n * @returns The next nodes.\n * @see {@link https://api.jquery.com/next/}\n */\n\nexports.next = _singleMatcher(function (elem) {\n  return htmlparser2_1.DomUtils.nextElementSibling(elem);\n});\n/**\n * Gets all the following siblings of the first selected element, optionally\n * filtered by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.apple').nextAll();\n * //=> [<li class=\"orange\">Orange</li>, <li class=\"pear\">Pear</li>]\n * $('.apple').nextAll('.orange');\n * //=> [<li class=\"orange\">Orange</li>]\n * ```\n *\n * @param selector - If specified filter for siblings.\n * @returns The next nodes.\n * @see {@link https://api.jquery.com/nextAll/}\n */\n\nexports.nextAll = _matcher(function (elem) {\n  var matched = [];\n\n  while (elem.next) {\n    elem = elem.next;\n    if (utils_1.isTag(elem)) matched.push(elem);\n  }\n\n  return matched;\n}, _removeDuplicates);\n/**\n * Gets all the following siblings up to but not including the element matched\n * by the selector, optionally filtered by another selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.apple').nextUntil('.pear');\n * //=> [<li class=\"orange\">Orange</li>]\n * ```\n *\n * @param selector - Selector for element to stop at.\n * @param filterSelector - If specified filter for siblings.\n * @returns The next nodes.\n * @see {@link https://api.jquery.com/nextUntil/}\n */\n\nexports.nextUntil = _matchUntil(function (el) {\n  return htmlparser2_1.DomUtils.nextElementSibling(el);\n}, _removeDuplicates);\n/**\n * Gets the previous sibling of the first selected element optionally filtered\n * by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.orange').prev().hasClass('apple');\n * //=> true\n * ```\n *\n * @param selector - If specified filter for siblings.\n * @returns The previous nodes.\n * @see {@link https://api.jquery.com/prev/}\n */\n\nexports.prev = _singleMatcher(function (elem) {\n  return htmlparser2_1.DomUtils.prevElementSibling(elem);\n});\n/**\n * Gets all the preceding siblings of the first selected element, optionally\n * filtered by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.pear').prevAll();\n * //=> [<li class=\"orange\">Orange</li>, <li class=\"apple\">Apple</li>]\n *\n * $('.pear').prevAll('.orange');\n * //=> [<li class=\"orange\">Orange</li>]\n * ```\n *\n * @param selector - If specified filter for siblings.\n * @returns The previous nodes.\n * @see {@link https://api.jquery.com/prevAll/}\n */\n\nexports.prevAll = _matcher(function (elem) {\n  var matched = [];\n\n  while (elem.prev) {\n    elem = elem.prev;\n    if (utils_1.isTag(elem)) matched.push(elem);\n  }\n\n  return matched;\n}, _removeDuplicates);\n/**\n * Gets all the preceding siblings up to but not including the element matched\n * by the selector, optionally filtered by another selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.pear').prevUntil('.apple');\n * //=> [<li class=\"orange\">Orange</li>]\n * ```\n *\n * @param selector - Selector for element to stop at.\n * @param filterSelector - If specified filter for siblings.\n * @returns The previous nodes.\n * @see {@link https://api.jquery.com/prevUntil/}\n */\n\nexports.prevUntil = _matchUntil(function (el) {\n  return htmlparser2_1.DomUtils.prevElementSibling(el);\n}, _removeDuplicates);\n/**\n * Get the siblings of each element (excluding the element) in the set of\n * matched elements, optionally filtered by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.pear').siblings().length;\n * //=> 2\n *\n * $('.pear').siblings('.orange').length;\n * //=> 1\n * ```\n *\n * @param selector - If specified filter for siblings.\n * @returns The siblings.\n * @see {@link https://api.jquery.com/siblings/}\n */\n\nexports.siblings = _matcher(function (elem) {\n  return htmlparser2_1.DomUtils.getSiblings(elem).filter(function (el) {\n    return utils_1.isTag(el) && el !== elem;\n  });\n}, uniqueSort);\n/**\n * Gets the children of the first selected element.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('#fruits').children().length;\n * //=> 3\n *\n * $('#fruits').children('.pear').text();\n * //=> Pear\n * ```\n *\n * @param selector - If specified filter for children.\n * @returns The children.\n * @see {@link https://api.jquery.com/children/}\n */\n\nexports.children = _matcher(function (elem) {\n  return htmlparser2_1.DomUtils.getChildren(elem).filter(utils_1.isTag);\n}, _removeDuplicates);\n/**\n * Gets the children of each element in the set of matched elements, including\n * text and comment nodes.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('#fruits').contents().length;\n * //=> 3\n * ```\n *\n * @returns The children.\n * @see {@link https://api.jquery.com/contents/}\n */\n\nfunction contents() {\n  var elems = this.toArray().reduce(function (newElems, elem) {\n    return domhandler_1.hasChildren(elem) ? newElems.concat(elem.children) : newElems;\n  }, []);\n  return this._make(elems);\n}\n\nexports.contents = contents;\n/**\n * Iterates over a cheerio object, executing a function for each matched\n * element. When the callback is fired, the function is fired in the context of\n * the DOM element, so `this` refers to the current element, which is equivalent\n * to the function parameter `element`. To break out of the `each` loop early,\n * return with `false`.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * const fruits = [];\n *\n * $('li').each(function (i, elem) {\n *   fruits[i] = $(this).text();\n * });\n *\n * fruits.join(', ');\n * //=> Apple, Orange, Pear\n * ```\n *\n * @param fn - Function to execute.\n * @returns The instance itself, useful for chaining.\n * @see {@link https://api.jquery.com/each/}\n */\n\nfunction each(fn) {\n  var i = 0;\n  var len = this.length;\n\n  while (i < len && fn.call(this[i], i, this[i]) !== false) {\n    ++i;\n  }\n\n  return this;\n}\n\nexports.each = each;\n/**\n * Pass each element in the current matched set through a function, producing a\n * new Cheerio object containing the return values. The function can return an\n * individual data item or an array of data items to be inserted into the\n * resulting set. If an array is returned, the elements inside the array are\n * inserted into the set. If the function returns null or undefined, no element\n * will be inserted.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('li')\n *   .map(function (i, el) {\n *     // this === el\n *     return $(this).text();\n *   })\n *   .toArray()\n *   .join(' ');\n * //=> \"apple orange pear\"\n * ```\n *\n * @param fn - Function to execute.\n * @returns The mapped elements, wrapped in a Cheerio collection.\n * @see {@link https://api.jquery.com/map/}\n */\n\nfunction map(fn) {\n  var elems = [];\n\n  for (var i = 0; i < this.length; i++) {\n    var el = this[i];\n    var val = fn.call(el, i, el);\n\n    if (val != null) {\n      elems = elems.concat(val);\n    }\n  }\n\n  return this._make(elems);\n}\n\nexports.map = map;\n/**\n * Creates a function to test if a filter is matched.\n *\n * @param match - A filter.\n * @returns A function that determines if a filter has been matched.\n */\n\nfunction getFilterFn(match) {\n  if (typeof match === 'function') {\n    return function (el, i) {\n      return match.call(el, i, el);\n    };\n  }\n\n  if (utils_1.isCheerio(match)) {\n    return function (el) {\n      return Array.prototype.includes.call(match, el);\n    };\n  }\n\n  return function (el) {\n    return match === el;\n  };\n}\n\nfunction filter(match) {\n  var _a;\n\n  return this._make(filterArray(this.toArray(), match, this.options.xmlMode, (_a = this._root) === null || _a === void 0 ? void 0 : _a[0]));\n}\n\nexports.filter = filter;\n\nfunction filterArray(nodes, match, xmlMode, root) {\n  return typeof match === 'string' ? select.filter(match, nodes, {\n    xmlMode: xmlMode,\n    root: root\n  }) : nodes.filter(getFilterFn(match));\n}\n\nexports.filterArray = filterArray;\n/**\n * Checks the current list of elements and returns `true` if *any* of the\n * elements match the selector. If using an element or Cheerio selection,\n * returns `true` if *any* of the elements match. If using a predicate function,\n * the function is executed in the context of the selected element, so `this`\n * refers to the current element.\n *\n * @category Attributes\n * @param selector - Selector for the selection.\n * @returns Whether or not the selector matches an element of the instance.\n * @see {@link https://api.jquery.com/is/}\n */\n\nfunction is(selector) {\n  var nodes = this.toArray();\n  return typeof selector === 'string' ? select.some(nodes.filter(utils_1.isTag), selector, this.options) : selector ? nodes.some(getFilterFn(selector)) : false;\n}\n\nexports.is = is;\n/**\n * Remove elements from the set of matched elements. Given a Cheerio object that\n * represents a set of DOM elements, the `.not()` method constructs a new\n * Cheerio object from a subset of the matching elements. The supplied selector\n * is tested against each element; the elements that don't match the selector\n * will be included in the result.\n *\n * The `.not()` method can take a function as its argument in the same way that\n * `.filter()` does. Elements for which the function returns `true` are excluded\n * from the filtered set; all other elements are included.\n *\n * @category Traversing\n * @example <caption>Selector</caption>\n *\n * ```js\n * $('li').not('.apple').length;\n * //=> 2\n * ```\n *\n * @example <caption>Function</caption>\n *\n * ```js\n * $('li').not(function (i, el) {\n *   // this === el\n *   return $(this).attr('class') === 'orange';\n * }).length; //=> 2\n * ```\n *\n * @param match - Value to look for, following the rules above.\n * @param container - Optional node to filter instead.\n * @returns The filtered collection.\n * @see {@link https://api.jquery.com/not/}\n */\n\nfunction not(match) {\n  var nodes = this.toArray();\n\n  if (typeof match === 'string') {\n    var matches_1 = new Set(select.filter(match, nodes, this.options));\n    nodes = nodes.filter(function (el) {\n      return !matches_1.has(el);\n    });\n  } else {\n    var filterFn_1 = getFilterFn(match);\n    nodes = nodes.filter(function (el, i) {\n      return !filterFn_1(el, i);\n    });\n  }\n\n  return this._make(nodes);\n}\n\nexports.not = not;\n/**\n * Filters the set of matched elements to only those which have the given DOM\n * element as a descendant or which have a descendant that matches the given\n * selector. Equivalent to `.filter(':has(selector)')`.\n *\n * @category Traversing\n * @example <caption>Selector</caption>\n *\n * ```js\n * $('ul').has('.pear').attr('id');\n * //=> fruits\n * ```\n *\n * @example <caption>Element</caption>\n *\n * ```js\n * $('ul').has($('.pear')[0]).attr('id');\n * //=> fruits\n * ```\n *\n * @param selectorOrHaystack - Element to look for.\n * @returns The filtered collection.\n * @see {@link https://api.jquery.com/has/}\n */\n\nfunction has(selectorOrHaystack) {\n  var _this = this;\n\n  return this.filter(typeof selectorOrHaystack === 'string' ? // Using the `:has` selector here short-circuits searches.\n  \":has(\" + selectorOrHaystack + \")\" : function (_, el) {\n    return _this._make(el).find(selectorOrHaystack).length > 0;\n  });\n}\n\nexports.has = has;\n/**\n * Will select the first element of a cheerio object.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('#fruits').children().first().text();\n * //=> Apple\n * ```\n *\n * @returns The first element.\n * @see {@link https://api.jquery.com/first/}\n */\n\nfunction first() {\n  return this.length > 1 ? this._make(this[0]) : this;\n}\n\nexports.first = first;\n/**\n * Will select the last element of a cheerio object.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('#fruits').children().last().text();\n * //=> Pear\n * ```\n *\n * @returns The last element.\n * @see {@link https://api.jquery.com/last/}\n */\n\nfunction last() {\n  return this.length > 0 ? this._make(this[this.length - 1]) : this;\n}\n\nexports.last = last;\n/**\n * Reduce the set of matched elements to the one at the specified index. Use\n * `.eq(-i)` to count backwards from the last selected element.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('li').eq(0).text();\n * //=> Apple\n *\n * $('li').eq(-1).text();\n * //=> Pear\n * ```\n *\n * @param i - Index of the element to select.\n * @returns The element at the `i`th position.\n * @see {@link https://api.jquery.com/eq/}\n */\n\nfunction eq(i) {\n  var _a;\n\n  i = +i; // Use the first identity optimization if possible\n\n  if (i === 0 && this.length <= 1) return this;\n  if (i < 0) i = this.length + i;\n  return this._make((_a = this[i]) !== null && _a !== void 0 ? _a : []);\n}\n\nexports.eq = eq;\n\nfunction get(i) {\n  if (i == null) {\n    return this.toArray();\n  }\n\n  return this[i < 0 ? this.length + i : i];\n}\n\nexports.get = get;\n/**\n * Retrieve all the DOM elements contained in the jQuery set as an array.\n *\n * @example\n *\n * ```js\n * $('li').toArray();\n * //=> [ {...}, {...}, {...} ]\n * ```\n *\n * @returns The contained items.\n */\n\nfunction toArray() {\n  return Array.prototype.slice.call(this);\n}\n\nexports.toArray = toArray;\n/**\n * Search for a given element from among the matched elements.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.pear').index();\n * //=> 2 $('.orange').index('li');\n * //=> 1\n * $('.apple').index($('#fruit, li'));\n * //=> 1\n * ```\n *\n * @param selectorOrNeedle - Element to look for.\n * @returns The index of the element.\n * @see {@link https://api.jquery.com/index/}\n */\n\nfunction index(selectorOrNeedle) {\n  var $haystack;\n  var needle;\n\n  if (selectorOrNeedle == null) {\n    $haystack = this.parent().children();\n    needle = this[0];\n  } else if (typeof selectorOrNeedle === 'string') {\n    $haystack = this._make(selectorOrNeedle);\n    needle = this[0];\n  } else {\n    $haystack = this;\n    needle = utils_1.isCheerio(selectorOrNeedle) ? selectorOrNeedle[0] : selectorOrNeedle;\n  }\n\n  return Array.prototype.indexOf.call($haystack, needle);\n}\n\nexports.index = index;\n/**\n * Gets the elements matching the specified range (0-based position).\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('li').slice(1).eq(0).text();\n * //=> 'Orange'\n *\n * $('li').slice(1, 2).length;\n * //=> 1\n * ```\n *\n * @param start - An position at which the elements begin to be selected. If\n *   negative, it indicates an offset from the end of the set.\n * @param end - An position at which the elements stop being selected. If\n *   negative, it indicates an offset from the end of the set. If omitted, the\n *   range continues until the end of the set.\n * @returns The elements matching the specified range.\n * @see {@link https://api.jquery.com/slice/}\n */\n\nfunction slice(start, end) {\n  return this._make(Array.prototype.slice.call(this, start, end));\n}\n\nexports.slice = slice;\n/**\n * End the most recent filtering operation in the current chain and return the\n * set of matched elements to its previous state.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('li').eq(0).end().length;\n * //=> 3\n * ```\n *\n * @returns The previous state of the set of matched elements.\n * @see {@link https://api.jquery.com/end/}\n */\n\nfunction end() {\n  var _a;\n\n  return (_a = this.prevObject) !== null && _a !== void 0 ? _a : this._make([]);\n}\n\nexports.end = end;\n/**\n * Add elements to the set of matched elements.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.apple').add('.orange').length;\n * //=> 2\n * ```\n *\n * @param other - Elements to add.\n * @param context - Optionally the context of the new selection.\n * @returns The combined set.\n * @see {@link https://api.jquery.com/add/}\n */\n\nfunction add(other, context) {\n  var selection = this._make(other, context);\n\n  var contents = uniqueSort(tslib_1.__spreadArray(tslib_1.__spreadArray([], this.get()), selection.get()));\n  return this._make(contents);\n}\n\nexports.add = add;\n/**\n * Add the previous set of elements on the stack to the current set, optionally\n * filtered by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('li').eq(0).addBack('.orange').length;\n * //=> 2\n * ```\n *\n * @param selector - Selector for the elements to add.\n * @returns The combined set.\n * @see {@link https://api.jquery.com/addBack/}\n */\n\nfunction addBack(selector) {\n  return this.prevObject ? this.add(selector ? this.prevObject.filter(selector) : this.prevObject) : this;\n}\n\nexports.addBack = addBack;","map":{"version":3,"sources":["/home/thomas/Code/BingoFerrand/node_modules/cheerio/lib/api/traversing.js"],"names":["Object","defineProperty","exports","value","addBack","add","end","slice","index","toArray","get","eq","last","first","has","not","is","filterArray","filter","map","each","contents","children","siblings","prevUntil","prevAll","prev","nextUntil","nextAll","next","closest","parentsUntil","parents","parent","find","tslib_1","require","domhandler_1","select","__importStar","utils_1","static_1","htmlparser2_1","uniqueSort","DomUtils","reSiblingSelector","selectorOrHaystack","_a","_make","context","haystack","isCheerio","elem","some","node","contains","elems","test","options","root","_root","xmlMode","_getMatcher","matchMap","fn","postFns","_i","arguments","length","selector","matched","reduce","_matcher","ret","i","push","Array","concat","apply","_singleMatcher","_matchUntil","nextElem","matches","innerMatcher","domEach","next_1","__spreadArray","filterSelector","_this","getFilterFn","call","_removeDuplicates","from","Set","isDocument","reverse","set","type","includes","nextElementSibling","isTag","el","prevElementSibling","getSiblings","getChildren","newElems","hasChildren","len","val","match","prototype","nodes","matches_1","filterFn_1","_","selectorOrNeedle","$haystack","needle","indexOf","start","prevObject","other","selection"],"mappings":"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","sourcesContent":["\"use strict\";\n/**\n * Methods for traversing the DOM structure.\n *\n * @module cheerio/traversing\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.addBack = exports.add = exports.end = exports.slice = exports.index = exports.toArray = exports.get = exports.eq = exports.last = exports.first = exports.has = exports.not = exports.is = exports.filterArray = exports.filter = exports.map = exports.each = exports.contents = exports.children = exports.siblings = exports.prevUntil = exports.prevAll = exports.prev = exports.nextUntil = exports.nextAll = exports.next = exports.closest = exports.parentsUntil = exports.parents = exports.parent = exports.find = void 0;\nvar tslib_1 = require(\"tslib\");\nvar domhandler_1 = require(\"domhandler\");\nvar select = tslib_1.__importStar(require(\"cheerio-select\"));\nvar utils_1 = require(\"../utils\");\nvar static_1 = require(\"../static\");\nvar htmlparser2_1 = require(\"htmlparser2\");\nvar uniqueSort = htmlparser2_1.DomUtils.uniqueSort;\nvar reSiblingSelector = /^\\s*[~+]/;\n/**\n * Get the descendants of each element in the current set of matched elements,\n * filtered by a selector, jQuery object, or element.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('#fruits').find('li').length;\n * //=> 3\n * $('#fruits').find($('.apple')).length;\n * //=> 1\n * ```\n *\n * @param selectorOrHaystack - Element to look for.\n * @returns The found elements.\n * @see {@link https://api.jquery.com/find/}\n */\nfunction find(selectorOrHaystack) {\n    var _a;\n    if (!selectorOrHaystack) {\n        return this._make([]);\n    }\n    var context = this.toArray();\n    if (typeof selectorOrHaystack !== 'string') {\n        var haystack = utils_1.isCheerio(selectorOrHaystack)\n            ? selectorOrHaystack.toArray()\n            : [selectorOrHaystack];\n        return this._make(haystack.filter(function (elem) { return context.some(function (node) { return static_1.contains(node, elem); }); }));\n    }\n    var elems = reSiblingSelector.test(selectorOrHaystack)\n        ? context\n        : this.children().toArray();\n    var options = {\n        context: context,\n        root: (_a = this._root) === null || _a === void 0 ? void 0 : _a[0],\n        xmlMode: this.options.xmlMode,\n    };\n    return this._make(select.select(selectorOrHaystack, elems, options));\n}\nexports.find = find;\n/**\n * Creates a matcher, using a particular mapping function. Matchers provide a\n * function that finds elements using a generating function, supporting filtering.\n *\n * @private\n * @param matchMap - Mapping function.\n * @returns - Function for wrapping generating functions.\n */\nfunction _getMatcher(matchMap) {\n    return function (fn) {\n        var postFns = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            postFns[_i - 1] = arguments[_i];\n        }\n        return function (selector) {\n            var _a;\n            var matched = matchMap(fn, this);\n            if (selector) {\n                matched = filterArray(matched, selector, this.options.xmlMode, (_a = this._root) === null || _a === void 0 ? void 0 : _a[0]);\n            }\n            return this._make(\n            // Post processing is only necessary if there is more than one element.\n            this.length > 1 && matched.length > 1\n                ? postFns.reduce(function (elems, fn) { return fn(elems); }, matched)\n                : matched);\n        };\n    };\n}\n/** Matcher that adds multiple elements for each entry in the input. */\nvar _matcher = _getMatcher(function (fn, elems) {\n    var _a;\n    var ret = [];\n    for (var i = 0; i < elems.length; i++) {\n        var value = fn(elems[i]);\n        ret.push(value);\n    }\n    return (_a = new Array()).concat.apply(_a, ret);\n});\n/** Matcher that adds at most one element for each entry in the input. */\nvar _singleMatcher = _getMatcher(function (fn, elems) {\n    var ret = [];\n    for (var i = 0; i < elems.length; i++) {\n        var value = fn(elems[i]);\n        if (value !== null) {\n            ret.push(value);\n        }\n    }\n    return ret;\n});\n/**\n * Matcher that supports traversing until a condition is met.\n *\n * @returns A function usable for `*Until` methods.\n */\nfunction _matchUntil(nextElem) {\n    var postFns = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        postFns[_i - 1] = arguments[_i];\n    }\n    // We use a variable here that is used from within the matcher.\n    var matches = null;\n    var innerMatcher = _getMatcher(function (nextElem, elems) {\n        var matched = [];\n        utils_1.domEach(elems, function (elem) {\n            for (var next_1; (next_1 = nextElem(elem)); elem = next_1) {\n                // FIXME: `matched` might contain duplicates here and the index is too large.\n                if (matches === null || matches === void 0 ? void 0 : matches(next_1, matched.length))\n                    break;\n                matched.push(next_1);\n            }\n        });\n        return matched;\n    }).apply(void 0, tslib_1.__spreadArray([nextElem], postFns));\n    return function (selector, filterSelector) {\n        var _this = this;\n        // Override `matches` variable with the new target.\n        matches =\n            typeof selector === 'string'\n                ? function (elem) { return select.is(elem, selector, _this.options); }\n                : selector\n                    ? getFilterFn(selector)\n                    : null;\n        var ret = innerMatcher.call(this, filterSelector);\n        // Set `matches` to `null`, so we don't waste memory.\n        matches = null;\n        return ret;\n    };\n}\nfunction _removeDuplicates(elems) {\n    return Array.from(new Set(elems));\n}\n/**\n * Get the parent of each element in the current set of matched elements,\n * optionally filtered by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.pear').parent().attr('id');\n * //=> fruits\n * ```\n *\n * @param selector - If specified filter for parent.\n * @returns The parents.\n * @see {@link https://api.jquery.com/parent/}\n */\nexports.parent = _singleMatcher(function (_a) {\n    var parent = _a.parent;\n    return (parent && !domhandler_1.isDocument(parent) ? parent : null);\n}, _removeDuplicates);\n/**\n * Get a set of parents filtered by `selector` of each element in the current\n * set of match elements.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.orange').parents().length;\n * //=> 2\n * $('.orange').parents('#fruits').length;\n * //=> 1\n * ```\n *\n * @param selector - If specified filter for parents.\n * @returns The parents.\n * @see {@link https://api.jquery.com/parents/}\n */\nexports.parents = _matcher(function (elem) {\n    var matched = [];\n    while (elem.parent && !domhandler_1.isDocument(elem.parent)) {\n        matched.push(elem.parent);\n        elem = elem.parent;\n    }\n    return matched;\n}, uniqueSort, function (elems) { return elems.reverse(); });\n/**\n * Get the ancestors of each element in the current set of matched elements, up\n * to but not including the element matched by the selector, DOM node, or cheerio object.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.orange').parentsUntil('#food').length;\n * //=> 1\n * ```\n *\n * @param selector - Selector for element to stop at.\n * @param filterSelector - Optional filter for parents.\n * @returns The parents.\n * @see {@link https://api.jquery.com/parentsUntil/}\n */\nexports.parentsUntil = _matchUntil(function (_a) {\n    var parent = _a.parent;\n    return (parent && !domhandler_1.isDocument(parent) ? parent : null);\n}, uniqueSort, function (elems) { return elems.reverse(); });\n/**\n * For each element in the set, get the first element that matches the selector\n * by testing the element itself and traversing up through its ancestors in the DOM tree.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.orange').closest();\n * //=> []\n *\n * $('.orange').closest('.apple');\n * // => []\n *\n * $('.orange').closest('li');\n * //=> [<li class=\"orange\">Orange</li>]\n *\n * $('.orange').closest('#fruits');\n * //=> [<ul id=\"fruits\"> ... </ul>]\n * ```\n *\n * @param selector - Selector for the element to find.\n * @returns The closest nodes.\n * @see {@link https://api.jquery.com/closest/}\n */\nfunction closest(selector) {\n    var _this = this;\n    var set = [];\n    if (!selector) {\n        return this._make(set);\n    }\n    utils_1.domEach(this, function (elem) {\n        var _a;\n        while (elem && elem.type !== 'root') {\n            if (!selector ||\n                filterArray([elem], selector, _this.options.xmlMode, (_a = _this._root) === null || _a === void 0 ? void 0 : _a[0])\n                    .length) {\n                // Do not add duplicate elements to the set\n                if (elem && !set.includes(elem)) {\n                    set.push(elem);\n                }\n                break;\n            }\n            elem = elem.parent;\n        }\n    });\n    return this._make(set);\n}\nexports.closest = closest;\n/**\n * Gets the next sibling of the first selected element, optionally filtered by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.apple').next().hasClass('orange');\n * //=> true\n * ```\n *\n * @param selector - If specified filter for sibling.\n * @returns The next nodes.\n * @see {@link https://api.jquery.com/next/}\n */\nexports.next = _singleMatcher(function (elem) { return htmlparser2_1.DomUtils.nextElementSibling(elem); });\n/**\n * Gets all the following siblings of the first selected element, optionally\n * filtered by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.apple').nextAll();\n * //=> [<li class=\"orange\">Orange</li>, <li class=\"pear\">Pear</li>]\n * $('.apple').nextAll('.orange');\n * //=> [<li class=\"orange\">Orange</li>]\n * ```\n *\n * @param selector - If specified filter for siblings.\n * @returns The next nodes.\n * @see {@link https://api.jquery.com/nextAll/}\n */\nexports.nextAll = _matcher(function (elem) {\n    var matched = [];\n    while (elem.next) {\n        elem = elem.next;\n        if (utils_1.isTag(elem))\n            matched.push(elem);\n    }\n    return matched;\n}, _removeDuplicates);\n/**\n * Gets all the following siblings up to but not including the element matched\n * by the selector, optionally filtered by another selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.apple').nextUntil('.pear');\n * //=> [<li class=\"orange\">Orange</li>]\n * ```\n *\n * @param selector - Selector for element to stop at.\n * @param filterSelector - If specified filter for siblings.\n * @returns The next nodes.\n * @see {@link https://api.jquery.com/nextUntil/}\n */\nexports.nextUntil = _matchUntil(function (el) { return htmlparser2_1.DomUtils.nextElementSibling(el); }, _removeDuplicates);\n/**\n * Gets the previous sibling of the first selected element optionally filtered\n * by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.orange').prev().hasClass('apple');\n * //=> true\n * ```\n *\n * @param selector - If specified filter for siblings.\n * @returns The previous nodes.\n * @see {@link https://api.jquery.com/prev/}\n */\nexports.prev = _singleMatcher(function (elem) { return htmlparser2_1.DomUtils.prevElementSibling(elem); });\n/**\n * Gets all the preceding siblings of the first selected element, optionally\n * filtered by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.pear').prevAll();\n * //=> [<li class=\"orange\">Orange</li>, <li class=\"apple\">Apple</li>]\n *\n * $('.pear').prevAll('.orange');\n * //=> [<li class=\"orange\">Orange</li>]\n * ```\n *\n * @param selector - If specified filter for siblings.\n * @returns The previous nodes.\n * @see {@link https://api.jquery.com/prevAll/}\n */\nexports.prevAll = _matcher(function (elem) {\n    var matched = [];\n    while (elem.prev) {\n        elem = elem.prev;\n        if (utils_1.isTag(elem))\n            matched.push(elem);\n    }\n    return matched;\n}, _removeDuplicates);\n/**\n * Gets all the preceding siblings up to but not including the element matched\n * by the selector, optionally filtered by another selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.pear').prevUntil('.apple');\n * //=> [<li class=\"orange\">Orange</li>]\n * ```\n *\n * @param selector - Selector for element to stop at.\n * @param filterSelector - If specified filter for siblings.\n * @returns The previous nodes.\n * @see {@link https://api.jquery.com/prevUntil/}\n */\nexports.prevUntil = _matchUntil(function (el) { return htmlparser2_1.DomUtils.prevElementSibling(el); }, _removeDuplicates);\n/**\n * Get the siblings of each element (excluding the element) in the set of\n * matched elements, optionally filtered by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.pear').siblings().length;\n * //=> 2\n *\n * $('.pear').siblings('.orange').length;\n * //=> 1\n * ```\n *\n * @param selector - If specified filter for siblings.\n * @returns The siblings.\n * @see {@link https://api.jquery.com/siblings/}\n */\nexports.siblings = _matcher(function (elem) {\n    return htmlparser2_1.DomUtils.getSiblings(elem).filter(function (el) { return utils_1.isTag(el) && el !== elem; });\n}, uniqueSort);\n/**\n * Gets the children of the first selected element.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('#fruits').children().length;\n * //=> 3\n *\n * $('#fruits').children('.pear').text();\n * //=> Pear\n * ```\n *\n * @param selector - If specified filter for children.\n * @returns The children.\n * @see {@link https://api.jquery.com/children/}\n */\nexports.children = _matcher(function (elem) { return htmlparser2_1.DomUtils.getChildren(elem).filter(utils_1.isTag); }, _removeDuplicates);\n/**\n * Gets the children of each element in the set of matched elements, including\n * text and comment nodes.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('#fruits').contents().length;\n * //=> 3\n * ```\n *\n * @returns The children.\n * @see {@link https://api.jquery.com/contents/}\n */\nfunction contents() {\n    var elems = this.toArray().reduce(function (newElems, elem) {\n        return domhandler_1.hasChildren(elem) ? newElems.concat(elem.children) : newElems;\n    }, []);\n    return this._make(elems);\n}\nexports.contents = contents;\n/**\n * Iterates over a cheerio object, executing a function for each matched\n * element. When the callback is fired, the function is fired in the context of\n * the DOM element, so `this` refers to the current element, which is equivalent\n * to the function parameter `element`. To break out of the `each` loop early,\n * return with `false`.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * const fruits = [];\n *\n * $('li').each(function (i, elem) {\n *   fruits[i] = $(this).text();\n * });\n *\n * fruits.join(', ');\n * //=> Apple, Orange, Pear\n * ```\n *\n * @param fn - Function to execute.\n * @returns The instance itself, useful for chaining.\n * @see {@link https://api.jquery.com/each/}\n */\nfunction each(fn) {\n    var i = 0;\n    var len = this.length;\n    while (i < len && fn.call(this[i], i, this[i]) !== false)\n        ++i;\n    return this;\n}\nexports.each = each;\n/**\n * Pass each element in the current matched set through a function, producing a\n * new Cheerio object containing the return values. The function can return an\n * individual data item or an array of data items to be inserted into the\n * resulting set. If an array is returned, the elements inside the array are\n * inserted into the set. If the function returns null or undefined, no element\n * will be inserted.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('li')\n *   .map(function (i, el) {\n *     // this === el\n *     return $(this).text();\n *   })\n *   .toArray()\n *   .join(' ');\n * //=> \"apple orange pear\"\n * ```\n *\n * @param fn - Function to execute.\n * @returns The mapped elements, wrapped in a Cheerio collection.\n * @see {@link https://api.jquery.com/map/}\n */\nfunction map(fn) {\n    var elems = [];\n    for (var i = 0; i < this.length; i++) {\n        var el = this[i];\n        var val = fn.call(el, i, el);\n        if (val != null) {\n            elems = elems.concat(val);\n        }\n    }\n    return this._make(elems);\n}\nexports.map = map;\n/**\n * Creates a function to test if a filter is matched.\n *\n * @param match - A filter.\n * @returns A function that determines if a filter has been matched.\n */\nfunction getFilterFn(match) {\n    if (typeof match === 'function') {\n        return function (el, i) { return match.call(el, i, el); };\n    }\n    if (utils_1.isCheerio(match)) {\n        return function (el) { return Array.prototype.includes.call(match, el); };\n    }\n    return function (el) {\n        return match === el;\n    };\n}\nfunction filter(match) {\n    var _a;\n    return this._make(filterArray(this.toArray(), match, this.options.xmlMode, (_a = this._root) === null || _a === void 0 ? void 0 : _a[0]));\n}\nexports.filter = filter;\nfunction filterArray(nodes, match, xmlMode, root) {\n    return typeof match === 'string'\n        ? select.filter(match, nodes, { xmlMode: xmlMode, root: root })\n        : nodes.filter(getFilterFn(match));\n}\nexports.filterArray = filterArray;\n/**\n * Checks the current list of elements and returns `true` if *any* of the\n * elements match the selector. If using an element or Cheerio selection,\n * returns `true` if *any* of the elements match. If using a predicate function,\n * the function is executed in the context of the selected element, so `this`\n * refers to the current element.\n *\n * @category Attributes\n * @param selector - Selector for the selection.\n * @returns Whether or not the selector matches an element of the instance.\n * @see {@link https://api.jquery.com/is/}\n */\nfunction is(selector) {\n    var nodes = this.toArray();\n    return typeof selector === 'string'\n        ? select.some(nodes.filter(utils_1.isTag), selector, this.options)\n        : selector\n            ? nodes.some(getFilterFn(selector))\n            : false;\n}\nexports.is = is;\n/**\n * Remove elements from the set of matched elements. Given a Cheerio object that\n * represents a set of DOM elements, the `.not()` method constructs a new\n * Cheerio object from a subset of the matching elements. The supplied selector\n * is tested against each element; the elements that don't match the selector\n * will be included in the result.\n *\n * The `.not()` method can take a function as its argument in the same way that\n * `.filter()` does. Elements for which the function returns `true` are excluded\n * from the filtered set; all other elements are included.\n *\n * @category Traversing\n * @example <caption>Selector</caption>\n *\n * ```js\n * $('li').not('.apple').length;\n * //=> 2\n * ```\n *\n * @example <caption>Function</caption>\n *\n * ```js\n * $('li').not(function (i, el) {\n *   // this === el\n *   return $(this).attr('class') === 'orange';\n * }).length; //=> 2\n * ```\n *\n * @param match - Value to look for, following the rules above.\n * @param container - Optional node to filter instead.\n * @returns The filtered collection.\n * @see {@link https://api.jquery.com/not/}\n */\nfunction not(match) {\n    var nodes = this.toArray();\n    if (typeof match === 'string') {\n        var matches_1 = new Set(select.filter(match, nodes, this.options));\n        nodes = nodes.filter(function (el) { return !matches_1.has(el); });\n    }\n    else {\n        var filterFn_1 = getFilterFn(match);\n        nodes = nodes.filter(function (el, i) { return !filterFn_1(el, i); });\n    }\n    return this._make(nodes);\n}\nexports.not = not;\n/**\n * Filters the set of matched elements to only those which have the given DOM\n * element as a descendant or which have a descendant that matches the given\n * selector. Equivalent to `.filter(':has(selector)')`.\n *\n * @category Traversing\n * @example <caption>Selector</caption>\n *\n * ```js\n * $('ul').has('.pear').attr('id');\n * //=> fruits\n * ```\n *\n * @example <caption>Element</caption>\n *\n * ```js\n * $('ul').has($('.pear')[0]).attr('id');\n * //=> fruits\n * ```\n *\n * @param selectorOrHaystack - Element to look for.\n * @returns The filtered collection.\n * @see {@link https://api.jquery.com/has/}\n */\nfunction has(selectorOrHaystack) {\n    var _this = this;\n    return this.filter(typeof selectorOrHaystack === 'string'\n        ? // Using the `:has` selector here short-circuits searches.\n            \":has(\" + selectorOrHaystack + \")\"\n        : function (_, el) { return _this._make(el).find(selectorOrHaystack).length > 0; });\n}\nexports.has = has;\n/**\n * Will select the first element of a cheerio object.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('#fruits').children().first().text();\n * //=> Apple\n * ```\n *\n * @returns The first element.\n * @see {@link https://api.jquery.com/first/}\n */\nfunction first() {\n    return this.length > 1 ? this._make(this[0]) : this;\n}\nexports.first = first;\n/**\n * Will select the last element of a cheerio object.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('#fruits').children().last().text();\n * //=> Pear\n * ```\n *\n * @returns The last element.\n * @see {@link https://api.jquery.com/last/}\n */\nfunction last() {\n    return this.length > 0 ? this._make(this[this.length - 1]) : this;\n}\nexports.last = last;\n/**\n * Reduce the set of matched elements to the one at the specified index. Use\n * `.eq(-i)` to count backwards from the last selected element.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('li').eq(0).text();\n * //=> Apple\n *\n * $('li').eq(-1).text();\n * //=> Pear\n * ```\n *\n * @param i - Index of the element to select.\n * @returns The element at the `i`th position.\n * @see {@link https://api.jquery.com/eq/}\n */\nfunction eq(i) {\n    var _a;\n    i = +i;\n    // Use the first identity optimization if possible\n    if (i === 0 && this.length <= 1)\n        return this;\n    if (i < 0)\n        i = this.length + i;\n    return this._make((_a = this[i]) !== null && _a !== void 0 ? _a : []);\n}\nexports.eq = eq;\nfunction get(i) {\n    if (i == null) {\n        return this.toArray();\n    }\n    return this[i < 0 ? this.length + i : i];\n}\nexports.get = get;\n/**\n * Retrieve all the DOM elements contained in the jQuery set as an array.\n *\n * @example\n *\n * ```js\n * $('li').toArray();\n * //=> [ {...}, {...}, {...} ]\n * ```\n *\n * @returns The contained items.\n */\nfunction toArray() {\n    return Array.prototype.slice.call(this);\n}\nexports.toArray = toArray;\n/**\n * Search for a given element from among the matched elements.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.pear').index();\n * //=> 2 $('.orange').index('li');\n * //=> 1\n * $('.apple').index($('#fruit, li'));\n * //=> 1\n * ```\n *\n * @param selectorOrNeedle - Element to look for.\n * @returns The index of the element.\n * @see {@link https://api.jquery.com/index/}\n */\nfunction index(selectorOrNeedle) {\n    var $haystack;\n    var needle;\n    if (selectorOrNeedle == null) {\n        $haystack = this.parent().children();\n        needle = this[0];\n    }\n    else if (typeof selectorOrNeedle === 'string') {\n        $haystack = this._make(selectorOrNeedle);\n        needle = this[0];\n    }\n    else {\n        $haystack = this;\n        needle = utils_1.isCheerio(selectorOrNeedle)\n            ? selectorOrNeedle[0]\n            : selectorOrNeedle;\n    }\n    return Array.prototype.indexOf.call($haystack, needle);\n}\nexports.index = index;\n/**\n * Gets the elements matching the specified range (0-based position).\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('li').slice(1).eq(0).text();\n * //=> 'Orange'\n *\n * $('li').slice(1, 2).length;\n * //=> 1\n * ```\n *\n * @param start - An position at which the elements begin to be selected. If\n *   negative, it indicates an offset from the end of the set.\n * @param end - An position at which the elements stop being selected. If\n *   negative, it indicates an offset from the end of the set. If omitted, the\n *   range continues until the end of the set.\n * @returns The elements matching the specified range.\n * @see {@link https://api.jquery.com/slice/}\n */\nfunction slice(start, end) {\n    return this._make(Array.prototype.slice.call(this, start, end));\n}\nexports.slice = slice;\n/**\n * End the most recent filtering operation in the current chain and return the\n * set of matched elements to its previous state.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('li').eq(0).end().length;\n * //=> 3\n * ```\n *\n * @returns The previous state of the set of matched elements.\n * @see {@link https://api.jquery.com/end/}\n */\nfunction end() {\n    var _a;\n    return (_a = this.prevObject) !== null && _a !== void 0 ? _a : this._make([]);\n}\nexports.end = end;\n/**\n * Add elements to the set of matched elements.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('.apple').add('.orange').length;\n * //=> 2\n * ```\n *\n * @param other - Elements to add.\n * @param context - Optionally the context of the new selection.\n * @returns The combined set.\n * @see {@link https://api.jquery.com/add/}\n */\nfunction add(other, context) {\n    var selection = this._make(other, context);\n    var contents = uniqueSort(tslib_1.__spreadArray(tslib_1.__spreadArray([], this.get()), selection.get()));\n    return this._make(contents);\n}\nexports.add = add;\n/**\n * Add the previous set of elements on the stack to the current set, optionally\n * filtered by a selector.\n *\n * @category Traversing\n * @example\n *\n * ```js\n * $('li').eq(0).addBack('.orange').length;\n * //=> 2\n * ```\n *\n * @param selector - Selector for the elements to add.\n * @returns The combined set.\n * @see {@link https://api.jquery.com/addBack/}\n */\nfunction addBack(selector) {\n    return this.prevObject\n        ? this.add(selector ? this.prevObject.filter(selector) : this.prevObject)\n        : this;\n}\nexports.addBack = addBack;\n"]},"metadata":{},"sourceType":"script"}